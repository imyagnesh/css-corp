"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcss_corp"] = self["webpackChunkcss_corp"] || []).push([["src_Pages_weatherApp_context_weather_js"],{

/***/ "./src/Pages/weatherApp/context/weather.js":
/*!*************************************************!*\
  !*** ./src/Pages/weatherApp/context/weather.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WeatherConsumer\": () => (/* binding */ WeatherConsumer),\n/* harmony export */   \"WeatherProvider\": () => (/* binding */ WeatherProvider)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n\nvar WeatherContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_10__.createContext)();\nvar WeatherConsumer = WeatherContext.Consumer;\nvar WeatherProvider = /*#__PURE__*/function (_PureComponent) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(WeatherProvider, _PureComponent);\n\n  var _super = _createSuper(WeatherProvider);\n\n  function WeatherProvider() {\n    var _this;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, WeatherProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"baseURL\", 'http://api.openweathermap.org/data/2.5/weather?appid=333458e05b25c5e69a7c22d64b7bc47f');\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"state\", {\n      report: [],\n      httpStatus: [],\n      locations: [],\n      units: [{\n        key: 'standard',\n        title: 'kelvin'\n      }, {\n        key: 'imperial',\n        title: 'Farenheet'\n      }, {\n        key: 'metric',\n        title: 'celcius'\n      }]\n    });\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"setRequestHttpStatus\", function (_ref) {\n      var type = _ref.type,\n          _ref$id = _ref.id,\n          id = _ref$id === void 0 ? -1 : _ref$id;\n\n      _this.setState(function (_ref2) {\n        var httpStatus = _ref2.httpStatus;\n        var index = httpStatus.findIndex(function (x) {\n          return x.type === type && x.id === id;\n        });\n        var data = {\n          type: type,\n          status: 'REQUEST',\n          id: id\n        };\n\n        if (index === -1) {\n          return {\n            httpStatus: [].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(httpStatus), [data])\n          };\n        }\n\n        return {\n          httpStatus: [].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(httpStatus.slice(0, 0)), [data], (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(httpStatus.slice(0 + 1)))\n        };\n      });\n    });\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"setSuccessHttpStatus\", function (_ref3) {\n      var type = _ref3.type,\n          _ref3$id = _ref3.id,\n          id = _ref3$id === void 0 ? -1 : _ref3$id;\n\n      _this.setState(function (_ref4) {\n        var httpStatus = _ref4.httpStatus;\n        return {\n          httpStatus: (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(httpStatus).filter(function (x) {\n            return x.type !== type && x.id === id;\n          })\n        };\n      });\n    });\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"setFailedHttpStatus\", function (_ref5) {\n      var type = _ref5.type,\n          _ref5$id = _ref5.id,\n          id = _ref5$id === void 0 ? -1 : _ref5$id,\n          error = _ref5.error;\n\n      _this.setState(function (_ref6) {\n        var httpStatus = _ref6.httpStatus;\n        var index = httpStatus.findIndex(function (x) {\n          return x.type === type && x.id === id;\n        });\n        var data = {\n          type: type,\n          status: 'FAIL',\n          id: id,\n          error: error\n        };\n        return {\n          httpStatus: [].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(httpStatus.slice(0, index)), [data], (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(httpStatus.slice(index + 1)))\n        };\n      });\n    });\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"loadReportData\", /*#__PURE__*/function () {\n      var _ref7 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee(currentCityId, currentUnit) {\n        var cityId, unitId, urlParams, locations, type, url, res, json, reportData, _json$sys, _json$weather$, _json$weather$2, _json$weather$3, _json$main, _json$main2, _json$main3, _json$wind, _json$wind2, _json$main4, _json$main5;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                cityId = currentCityId || 'Bengaluru,in';\n                unitId = currentUnit || 'standard';\n                urlParams = \"&q=\".concat(cityId, \"&units=\").concat(unitId);\n                locations = _this.state.locations;\n                type = currentUnit ? 'CHANGE_UNIT' : 'LOAD_DATA';\n                _context.prev = 5;\n\n                _this.setRequestHttpStatus({\n                  type: type\n                });\n\n                url = \"\".concat(_this.baseURL).concat(urlParams);\n                _context.next = 10;\n                return fetch(url);\n\n              case 10:\n                res = _context.sent;\n                _context.next = 13;\n                return res.json();\n\n              case 13:\n                json = _context.sent;\n\n                if (!json.message) {\n                  reportData = {\n                    name: \"\".concat(json.name, \", \").concat((_json$sys = json.sys) === null || _json$sys === void 0 ? void 0 : _json$sys.country),\n                    description: \"\".concat((_json$weather$ = json.weather[0]) === null || _json$weather$ === void 0 ? void 0 : _json$weather$.main, \" | \").concat((_json$weather$2 = json.weather[0]) === null || _json$weather$2 === void 0 ? void 0 : _json$weather$2.description),\n                    icon: \"\".concat((_json$weather$3 = json.weather[0]) === null || _json$weather$3 === void 0 ? void 0 : _json$weather$3.icon),\n                    temp: (_json$main = json.main) === null || _json$main === void 0 ? void 0 : _json$main.temp,\n                    temp_max: (_json$main2 = json.main) === null || _json$main2 === void 0 ? void 0 : _json$main2.temp_max,\n                    temp_min: (_json$main3 = json.main) === null || _json$main3 === void 0 ? void 0 : _json$main3.temp_min,\n                    wind_speed: (_json$wind = json.wind) === null || _json$wind === void 0 ? void 0 : _json$wind.speed,\n                    wind_direction: (_json$wind2 = json.wind) === null || _json$wind2 === void 0 ? void 0 : _json$wind2.deg,\n                    humidity: (_json$main4 = json.main) === null || _json$main4 === void 0 ? void 0 : _json$main4.humidity,\n                    pressure: (_json$main5 = json.main) === null || _json$main5 === void 0 ? void 0 : _json$main5.pressure,\n                    unit: unitId === 'imperial' ? 'ºF' : unitId === 'metric' ? 'ºC' : 'K'\n                  };\n                }\n\n                _this.setState({\n                  report: json.message ? [] : reportData,\n                  locations: currentCityId ? [] : locations\n                });\n\n                document.getElementById('searchInput').value = currentCityId ? '' : document.getElementById('searchInput').value;\n                document.getElementById('unit-filter').value = currentUnit ? document.getElementById('unit-filter').value : 'standard';\n\n                _this.setSuccessHttpStatus({\n                  type: type\n                });\n\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](5);\n\n                _this.setFailedHttpStatus({\n                  type: type,\n                  error: _context.t0\n                });\n\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[5, 21]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref7.apply(this, arguments);\n      };\n    }());\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"fetchLocationInfo\", /*#__PURE__*/function () {\n      var _ref8 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee2(event) {\n        var type, searchText, url, res, json;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                type = 'LOAD_CITY';\n                _context2.prev = 1;\n                searchText = event.target.value;\n\n                if (!(searchText.length > 2)) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                url = \"https://api.openweathermap.org/geo/1.0/direct?q=\".concat(searchText, \"&limit=8&appid=9168fc483359274a6a9c18343a0c6459\");\n\n                _this.setRequestHttpStatus({\n                  type: type\n                });\n\n                _context2.next = 8;\n                return fetch(url);\n\n              case 8:\n                res = _context2.sent;\n                _context2.next = 11;\n                return res.json();\n\n              case 11:\n                json = _context2.sent;\n\n                _this.setState({\n                  locations: json.filter(function (v, i, a) {\n                    return a.findIndex(function (t) {\n                      return t.name.toLowerCase() === v.name.toLowerCase() && t.country.toLowerCase() === v.country.toLowerCase();\n                    }) === i;\n                  })\n                });\n\n                _context2.next = 16;\n                break;\n\n              case 15:\n                _this.setState({\n                  locations: []\n                });\n\n              case 16:\n                _this.setSuccessHttpStatus({\n                  type: type\n                });\n\n                _context2.next = 22;\n                break;\n\n              case 19:\n                _context2.prev = 19;\n                _context2.t0 = _context2[\"catch\"](1);\n\n                _this.setFailedHttpStatus({\n                  type: type,\n                  error: _context2.t0\n                });\n\n              case 22:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 19]]);\n      }));\n\n      return function (_x3) {\n        return _ref8.apply(this, arguments);\n      };\n    }());\n\n    (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"changeUnit\", /*#__PURE__*/function () {\n      var _ref9 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee3(event) {\n        var type, report, unitFilter;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                type = 'CHANGE_UNIT';\n                report = _this.state.report;\n\n                try {\n                  unitFilter = event.target.value;\n\n                  _this.loadReportData(report.name, unitFilter);\n                } catch (error) {\n                  _this.setFailedHttpStatus({\n                    type: type,\n                    error: error\n                  });\n                }\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x4) {\n        return _ref9.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(WeatherProvider, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().mark(function _callee4() {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_9___default().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.loadReportData();\n                this.fetchLocationInfo = _.debounce(this.fetchLocationInfo, 1000);\n                this.inputText = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_10__.createRef)();\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = this.props.children;\n      var _this$state = this.state,\n          report = _this$state.report,\n          locations = _this$state.locations,\n          httpStatus = _this$state.httpStatus,\n          units = _this$state.units;\n\n      var _httpStatus$reduce = httpStatus.reduce(function (p, c) {\n        if (c.type === 'LOAD_DATA') return _objectSpread(_objectSpread({}, p), {}, {\n          loadDataStatus: c\n        });\n        if (c.type === 'LOAD_CITY') return _objectSpread(_objectSpread({}, p), {}, {\n          loadCityStatus: c\n        });\n        if (c.type === 'CHANGE_UNIT') return _objectSpread(_objectSpread({}, p), {}, {\n          changeUnitStatus: c\n        });\n        return _objectSpread(_objectSpread({}, p), {}, {\n          defaultStatus: [].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(p.defaultStatus), [c])\n        });\n      }, {\n        defaultStatus: []\n      }),\n          loadDataStatus = _httpStatus$reduce.loadDataStatus,\n          loadCityStatus = _httpStatus$reduce.loadCityStatus,\n          defaultStatus = _httpStatus$reduce.defaultStatus,\n          changeUnitStatus = _httpStatus$reduce.changeUnitStatus;\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_10__.createElement(WeatherContext.Provider, {\n        value: {\n          inputText: this.inputText,\n          report: report,\n          locations: locations,\n          units: units,\n          loadReportData: this.loadReportData,\n          loadDataStatus: loadDataStatus,\n          loadCityStatus: loadCityStatus,\n          defaultStatus: defaultStatus,\n          changeUnitStatus: changeUnitStatus,\n          fetchLocationInfo: this.fetchLocationInfo,\n          changeUnit: this.changeUnit\n        }\n      }, children);\n    }\n  }]);\n\n  return WeatherProvider;\n}(react__WEBPACK_IMPORTED_MODULE_10__.PureComponent);\n\n//# sourceURL=webpack://css-corp/./src/Pages/weatherApp/context/weather.js?");

/***/ })

}]);